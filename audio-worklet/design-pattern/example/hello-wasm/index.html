<!DOCTYPE html>
<html>
<head>
  <title>Hello WASM! | Examples | WebAudio + WASM</title>
</head>
<body>
  <a href="../index.html">Example Index</a>
  <h1>Hello WASM!</h1>
  <p>See the console window for interesting numbers.</p>
  <script>
    // A simple utility for loading a WASM module.
    const loadWASM = async () => {
      const response = await fetch('hello-wasm.wasm');
      const arrayBuffer = await response.arrayBuffer();
      const module = await WebAssembly.compile(arrayBuffer);
      return module;
    }

    loadWASM().then((module) => {
      // This example does not use the glue code, so we need to provide the
      // |imports| object.
      const imports = {
        env: {
          // TODO(hoch): figure out why 256 makes sense.
          memory: new WebAssembly.Memory({ initial: 256, maximum: 256 }),
          STACKTOP: 0
        }
      };

      const instance = new WebAssembly.Instance(module, imports);

      console.log(instance.exports._addDoubles(3,5));
      console.log(instance.exports._getB1(240, 48000));
    });
  </script>
</body>
</html>
